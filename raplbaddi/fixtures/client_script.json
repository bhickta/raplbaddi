[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Service Centre",
  "enabled": 0,
  "modified": "2023-05-06 11:29:36.212215",
  "module": null,
  "name": "User permission service centre",
  "script": "frappe.listview_settings['Service Centre'] = {\n    onload: function(listview) {\n        frappe.call({\n            method: 'frappe.client.get_list',\n            args: {\n                doctype: 'Service Centre',\n                fields: ['user', 'name'],\n                limit: 100\n            },\n            callback: function(response) {\n                console.log(response.message);\n                for (var i = 0; i < response.message.length; i++) {\n                    console.log(response.message[i].user + \": \" + response.message[i].name);\n                }\n            }\n        });\n    }\n};\n",
  "view": "List"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Warranty Check",
  "enabled": 1,
  "modified": "2023-05-06 16:56:50.359596",
  "module": null,
  "name": "Warranty Check",
  "script": "frappe.ui.form.on('Warranty Check', {\n\trefresh(frm){\n        frm.add_custom_button(__('Check Warranty'), function(){\n            let sn = frm.doc.serial_no;\n            console.log(sn)\n            frappe.db.count('Daily Production Item', {'serial_no': sn}).then((r)=>console.log(r))\n        });\n\t} \n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "IssueRapl",
  "enabled": 0,
  "modified": "2023-05-07 11:28:58.993311",
  "module": null,
  "name": "Make Se of Spare",
  "script": "frappe.ui.form.on('IssueRapl', {\n\trefresh(frm) {\n\t    if(frm.doc.status =='Closed'){\n\t\t    frm.add_custom_button(__('Stock Entry'), ()=> {})\n\t    }\n\t}\n})\n\nfunction items(frm) {\n    let spare_list = {};\n    let spare = frm.doc.spare_parts_used;\n    console.log(spare);\n    for (let s = 0; s < spare.length; s++) {\n        spare_list[spare[s].name] = {\n            parent: spare[s].parent,\n            spare_parts: spare[s].spare_parts,\n            stock_entry: spare[s].stock_entry\n        };\n    }\n    return spare_list\n}",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Permission Test",
  "enabled": 1,
  "modified": "2023-05-25 15:37:22.096187",
  "module": null,
  "name": "Permission",
  "script": "frappe.ui.form.on('Permission Test', {\n\trefresh(frm) {\n\t\tlet user = frappe.has_role(frappe.session.user, \"System Manager\")\n\t\tconsole.log(user)\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Order",
  "enabled": 0,
  "modified": "2023-07-20 11:33:06.918476",
  "module": null,
  "name": "SO Rates Itemwise",
  "script": "let so;\n\nfrappe.ui.form.on('Sales Order', {\n  customer: async function(frm) {\n    await saleOrder(frm);\n  },\n  apply_old_discounts: function(frm){\n    frm.doc.items.forEach((item) => {oldDiscounts(frm, item)})  \n  }\n});\n\n\nfunction oldDiscounts(frm, item){\n    let discount = get_discount(item.item_code, frm)\n    item.discount_amount = discount\n    item.rate = item.rate - item.discount_amount\n    frm.refresh()\n}\n\nasync function saleOrder(frm) {\n  const r = await frappe.call('raplbaddi.api.price_list_of_customer', {\n    customer: frm.doc.customer\n  });\n  so = r.message;\n}\n\nfrappe.ui.form.on('Sales Order Item', {\n  apply_old_discounts: function(frm, cdt, cdn) {\n    const item = locals[cdt][cdn];\n    const discount_amount = get_discount(item.item_code, frm);\n    frappe.model.set_value(cdt, cdn, 'discount_amount', discount_amount);\n    console.log(discount_amount);\n  }\n});\n\nfunction get_discount(itemCode, frm) {\n  for (const item of so) {\n    if (item.item_code === itemCode) {\n      return parseInt(item.discount_amount);\n    }\n  }\n  return 0;\n}",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 0,
  "modified": "2023-06-19 19:03:15.711489",
  "module": null,
  "name": "Item List",
  "script": "frappe.listview_settings['Item'] = {\n    query_fields: ['item_name'],\n    query_filters: [\n    ],\n    parser: function(data, render) {\n        let names = [];\n        data.forEach(function(row) {\n            names.push(row.name);\n        });\n        if (!names.length) {\n            return render();\n        }\n        frappe.db.get_list('Item', {\n            fields: ['name', 'price'],\n            filters: {\n                name: ['in', names],\n                is_approved: 1,\n            }\n        }).then(function(list) {\n            list.forEach(function(vals) {\n                data.forEach(function(row) {\n                    if (vals.name === row.name) {\n                        row.price = vals.price;\n                    }\n                });\n            });\n            render();\n        });\n    },\n};\n",
  "view": "List"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2023-09-12 14:50:31.363967",
  "module": null,
  "name": "Item Naming",
  "script": "frappe.ui.form.on('Item', {\n\tstandardize_name(frm) {\n\t\tlet doc = frm.doc;\n\t\tfrappe.db.get_value('Item Group', doc.item_group, 'abbreviation')\n\t\t.then(r1 => {\n\t\t\tlet group = r1.message.abbreviation;\n\t\t\tfrappe.db.get_value('Geyser Model', doc.geyser_model, 'abbreviation')\n\t\t\t.then(r2 => {\n\t\t\t\tlet model = r2.message.abbreviation;\n\t\t\t\tconsole.log(model)\n\t\t\t\tlet capacity = doc.capacity;\n\t\t\t\tlet brand = 'Plain'\n\t\t\t\tlet brand_prefix, old, craft\n\t\t\t\tif(doc.brand_prefix){\n\t\t\t\t    brand_prefix = doc.brand_prefix\n\t\t\t\t}else{\n\t\t\t\t    brand_prefix = ''\n\t\t\t\t}\n\t\t\t\tif(doc.box_category == \"Printed\" && doc.old){\n\t\t\t\t    old = 'Old'\n\t\t\t\t} else {\n\t\t\t\t    old = ''\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(doc.craft_paper){\n\t\t\t\t    craft = 'Craft'\n\t\t\t\t} else {\n\t\t\t\t    craft = ''\n\t\t\t\t}\n\t\t\t\tif (doc.brand){\n\t\t\t\t\tbrand = doc.brand\n\t\t\t\t} else {\n\t\t\t\t\tbrand = doc.plain_box_type\n\t\t\t\t}\n\t\t\t\tif(capacity == 1 || capacity == 3 || capacity == 6 || capacity == 10 || capacity == 70 || capacity == 100){\n\t\t\t\t    frm.set_value('item_name', (group + capacity + \" \" + brand + \" \" + brand_prefix + old + craft).trim());\n\t\t\t\t    frm.set_value('item_code', (group + capacity + \" \" + brand + \" \" + brand_prefix + old + craft).trim());\n\t\t\t\t} else{\n\t\t\t\t    frm.set_value('item_name', (group + capacity + model + \" \" + brand + \" \" + brand_prefix + old + craft).trim());\n\t\t\t\t    frm.set_value('item_code', (group + capacity + \" \" + brand + \" \" + brand_prefix + old + craft).trim());\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Packing Boxes Entry",
  "enabled": 0,
  "modified": "2023-06-28 10:08:45.180338",
  "module": null,
  "name": "PB Stock Entry 1",
  "script": "frappe.ui.form.on('Packing Boxes Entry', {\n    after_save(frm) {\n        frappe.call({\n            method: 'erpnext.stock.doctype.stock_entry.stock_entry_utils.make_stock_entry',\n            args: {\n                \"item_code\": \"I102\",\n                \"qty\": \"1\",\n                \"purpose\": \"Material Issue\",\n                \"from_warehouse\": \"Packing Boxes - RAPL\"\n            },\n            callback: function(r) {\n                if (!r.exc) {\n                    console.log(r)\n                }\n            }\n        });\n    }\n});\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Customer",
  "enabled": 0,
  "modified": "2023-06-28 10:27:58.975286",
  "module": null,
  "name": "Customer Gst",
  "script": "frappe.ui.form.on('Customer', {\n\trefresh(frm) {\n\t\tcopyPageUrl()\n\t}\n})\n\nasync function copyPageUrl() {\n  try {\n    await navigator.clipboard.writeText(location.href);\n    console.log('Page URL copied to clipboard');\n  } catch (err) {\n    console.error('Failed to copy: ', err);\n  }\n}",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Production Entry",
  "enabled": 0,
  "modified": "2023-07-13 09:27:55.796872",
  "module": null,
  "name": "Element Production Entry",
  "script": "frappe.ui.form.on('Production Entry', {\n    before_submit(frm) {\n        if (frm.doc.item == \"Element\") {\n\n            frappe.call({\n                method: 'erpnext.stock.doctype.stock_entry.stock_entry_utils.make_stock_entry',\n                args: {\n                    \"item_code\": frm.doc.element_type,\n                    \"qty\": frm.doc.total_quantity,\n                    \"to_warehouse\": \"Element Section - Rapl\",\n                    \"purpose\": \"Element Receipt\"\n                },\n                callback: function(r) {\n                    if (!r.exc) {\n                        console.log(r)\n                    }\n                }\n            });\n        }\n    }\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Stock Entry",
  "enabled": 0,
  "modified": "2023-07-28 10:40:31.289752",
  "module": null,
  "name": "Stock Entry Geyser Multiple Field Add",
  "script": "frappe.ui.form.on('Stock Entry', {\n    stock_entry_type(frm) {\n        if (frm.doc.stock_entry_type == \"Element Issue\") {\n            new frappe.ui.form.MultiSelectDialog({\n                doctype: \"Sales Order\",\n                target: frm,\n                setters: {\n                    customer: null,\n                    status: null\n                },\n                add_filters_group: 1,\n                date_field: \"transaction_date\",\n                allow_child_item_selection: 1,\n                child_fieldname: \"items\", // child table fieldname, whose records will be shown &amp; can be filtered\n                child_columns: [\"item_name\", \"qty\"], // child item columns to be displayed\n                get_query() {\n                    return {\n                        filters: {\n                            docstatus: ['!=', 2]\n                        }\n                    }\n                },\n                action(selections, args) {\n                    console.log(args.filtered_children); // list of selected item names\n                }\n            });\n        }\n    }\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 0,
  "modified": "2023-07-15 10:50:22.774161",
  "module": null,
  "name": "Box Request",
  "script": "frappe.ui.form.on('Material Request', {\n\tonload(frm) {\n\t\tif(frappe.user.has_role('Box Manager')){\n\t\t\tfrm.set_value(\"material_request_type\", \"Material Issue\");\n\t\t\tfrm.set_value(\"schedule_date\", frappe.datetime.now_date());\n\t\t\tfrm.refresh_field('material_request_type');\n\t\t\tfrm.set_value(\"item_group\", \"Packing Boxes\")\n\t\t}\n\t},\n\titem_group(frm){\n    \tfrm.set_query(\"item_code\", \"items\", function() {\n\t\treturn {\n\t\t\tfilters: { \"item_group\": frm.doc.item_group }\n\t\t};\n\t});\n\t}\n});\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Delivery Note",
  "enabled": 1,
  "modified": "2025-04-12 18:02:34.768424",
  "module": null,
  "name": "Delivery note brand warehouse",
  "script": "frappe.ui.form.on('Delivery Note', {\n    onload(frm) {\n    },\n    before_save(frm) {\n        frm.doc.items.forEach((item) => {\n            if ([\"DLP-Price List\"].includes(item.item_group)) {\n                item.warehouse = \"FG - RAPL\";\n            } else if (item.brand) {\n                item.warehouse = item.brand + \" - RAPL\";\n            } else {\n                item.warehouse = \"Stores - RAPL\";\n            }\n        });\n        frm.refresh_field(\"items\");\n    }\n});\n\nfrappe.ui.form.on('Delivery Note Item', {\n    brand(frm, cdt, cdn) {\n        let row = locals[cdt][cdn];\n        if (![\"Cooler\", \"DLP-Price List\"].includes(row.item_group)) {\n            frappe.model.set_value(cdt, cdn, \"warehouse\", row.brand + \" - RAPL\");\n        } else {\n            frappe.model.set_value(cdt, cdn, \"warehouse\", \"FG - RAPL\");\n        }\n        frm.refresh_field(\"items\");\n    }\n});\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Brand",
  "enabled": 1,
  "modified": "2023-09-29 15:36:02.038266",
  "module": null,
  "name": "Brand warehouse",
  "script": "frappe.ui.form.on('Brand', {\n\tadd_supplier(frm) {\n\t\tfrm.doc.paper_names.forEach(i => {\n\t\t\tfrm.add_child('priority_and_rates', { 'supplier': frm.doc.supplier, 'priority': frm.doc.paper_name, 'paper_name': i.title, 'priority': frm.doc.priority})\n\t\t})\n\t\tfrm.refresh_field('priority_and_rates')\n\t}\n});\n\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Delivery Note",
  "enabled": 1,
  "modified": "2024-09-21 23:58:49.293112",
  "module": null,
  "name": "B2S2 Delivery Note",
  "script": "frappe.ui.form.on('Delivery Note', {\n    refresh(frm) {\n        if (frm.doc.customer) {\n            remove_shipping_address_filters(frm);\n        }\n    },\n    customer_address(frm) {\n        remove_shipping_address_filters(frm);\n    },\n    customer(frm) {\n        remove_shipping_address_filters(frm);\n    },\n    after_save(frm) {\n        if (!frm.doc.shipping_address_name) {\n            frm.set_value(\"shipping_address_name\", frm.doc.customer_address);\n            frm.refresh_field(\"shipping_address_name\");\n        }\n    }\n});\n\nfunction remove_shipping_address_filters(frm) {\n    frm.set_query(\"shipping_address_name\", () => {\n        return {\n            filters: {}\n        };\n    });\n}\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Order",
  "enabled": 0,
  "modified": "2023-08-25 16:31:57.506652",
  "module": null,
  "name": "SODlp",
  "script": "frappe.ui.form.on('Sales Order', {\n\tcustomer(frm) {\n\t    console.log(frm.get_doc('Customer', frm.doc.customer))\t\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item Testing Entry",
  "enabled": 1,
  "modified": "2023-09-04 11:52:13.373858",
  "module": null,
  "name": "ITE",
  "script": "frappe.ui.form.on('Item Testing Entry', {\n    refresh(frm) {\n        fetch('https://graph.facebook.com/v16.0/101225586311926/messages', {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/json',\n            \"authorization\": 'Bearer EAATFAMMIZCN0BOZBrmRZA97mLjO1t1EdrG9U07MayTWo5hrONquM7vdWx62vT23PQk4gnQ5rgbkIBkS5vW23mLxYsZAbA3derql47o1iFKz769FLvrvUfNLoKcuPkB8xt2UM7PM00ZCRJraO12GGaaAeP1yd1icM8zCuGtLfZB1hLpefoxtOx01ZCuClgywBGZCtA2h75jL4fCun7mg5ZCUevCYH9qU4ZD'\n        },\n        body: JSON.stringify({\n            \"messaging_product\": \"whatsapp\",\n            \"recipient_type\": \"individual\",\n            \"to\": \"7888465211\",\n            \"type\": \"text\",\n            \"text\": {\"body\" : \"hi\"}\n        })\n        })\n        .then(r => r.json())\n        .then(r => {\n            console.log(r);\n        })\n    }\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Testing Report",
  "enabled": 1,
  "modified": "2023-09-06 14:16:22.192734",
  "module": null,
  "name": "Testing Api",
  "script": "frappe.ui.form.on('Testing Report', {\n\trefresh(frm) {\n\t\tfetch('https://raplbaddi.com/api/resource/Delivery%20Note/DN-23-00465', {\n        })\n        .then(r => r.json())\n        .then(r => {\n            console.log(r.data.items[0]);\n        })\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Receipt Note",
  "enabled": 1,
  "modified": "2023-09-22 12:11:29.031327",
  "module": null,
  "name": "Material Receipt Note",
  "script": "frappe.ui.form.on('Material Receipt Note', {\n    before_save(frm){\n        if(frm.doc.supplier_invoice_number){\n            frm.set_value('supplier_invoice_number', frm.doc.supplier_invoice_number.toUpperCase())\n            frm.refresh_field('supplier_invoce_number')\n        }\n        $.each(frm.doc.items || [], function (i, v) {\n    \t    if(v.received_qty != v.supplier_qty)  {\n                let shortage = v.received_qty - v.supplier_qty\n                frappe.model.set_value(v.doctype, v.name, \"shortage_qty\", shortage)\n    \t    } else {\n    \t        frappe.model.set_value(v.doctype, v.name, \"shortage_qty\", 0)\n    \t    }\n        }\n\t)},\n\t\n    before_submit(frm){\n        if(!(frm.doc.supplier || frm.doc.customer)){\n            frappe.throw('Kindly Add Supplier')\n        }\n    },\n\tcopy(frm) {\n    frappe.show_alert('Copied', );          \n    const { account_holder_name, amount, gpay_phonepe_paytm, account_number, ifsc_code, party_name } = frm.doc;\n    const fieldMapping = {\n      supplier: '*Supplier*',\n      date: 'Date',\n      ite\n    };\n\n    const data = Object.entries(fieldMapping)\n      .filter(([field]) => !!frm.doc[field])\n      .map(([field, label]) => `${label}: ${frm.doc[field]}`);\n\n    if (data.length > 0) {\n      navigator.clipboard.writeText(data.join('\\n')).then((r) => {\n      });\n    } else {\n      frappe.msgprint('No data to copy', 'Details');\n    }\n  },\n})\n\n\n\nfrappe.ui.form.on('Material Receipt Note Item', {\n\treceived_qty(frm, cdt, cdn) {\n\t    let row = locals[cdt][cdn]\n\t\tfrappe.model.set_value(cdt, cdn, \"supplier_qty\", row.received_qty)\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 0,
  "modified": "2025-04-01 20:53:00.309629",
  "module": null,
  "name": "Material Request",
  "script": "frappe.ui.form.on('Material Request', {\n    hold(frm){\n      frm.set_value(\"custom_status\", \"Stopped\")\n      frm.save('Update')\n    },\n    onload_post_render(frm) {\n        frm.set_query(\"item_code\", \"items\", (doc, cdt, cdn) => {\n            let row = locals[cdt][cdn];\n            return {\n                filters: {\n                    'item_group': frm.doc.item_group\n                }\n            }\n        })\n\n    }\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Customer",
  "enabled": 0,
  "modified": "2023-09-19 17:17:28.675552",
  "module": null,
  "name": "Tem CG",
  "script": "frappe.ui.form.on('Customer', {\n\tonload(frm) {\n\t\tfrm.set_value('customer_group', 'Confusion in Salesmen')\n\t\tfrm.refresh_field('customer_group')\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2023-11-06 10:21:31.808736",
  "module": null,
  "name": "Purchase Order",
  "script": "const boxSupplier = {\n    'Jai Ambey Industries': {\n        user: 'testboxsupplier@gmail.com',\n        home: 'Jai Ambey Industries - RAPL',\n        away: 'Packing Boxes - RAPL'\n    }    \n}   \n\nlet based_on_material_request = ''\nfrappe.ui.form.on('Purchase Order', {\n    based_on_material_request: function(frm, cdt, cdn) {\n        based_on_material_request = frm.doc.based_on_material_request\n        if(!frm.doc.items[frm.doc.items.length - 1].item_code) {\n            frm.doc.items.pop()\n            frm.refresh_field('items')\n        }\n        if (based_on_material_request) {\n            frm.fields_dict['items'].grid.get_field('item_code').get_query = function(doc, cdt, cdn) {\n                return {\n                    query: \"raplbaddi.api.get_mr_query\",\n                    filters: [[\"supplier\", \"=\", frm.doc.supplier], [\"docstatus\", \"=\", 1], [\"status\", \"!=\", \"Stopped\"]],\n                    searchfield: 'item_code'\n                };\n            };\n        } else {\n            if(frm.doc.items[frm.doc.items.length - 1].item_code === '') {\n                frm.doc.items.pop()\n                frm.refresh_field('items')\n            }\n                frm.fields_dict['items'].grid.get_field('item_code').get_query = function(doc, cdt, cdn) {\n                return {\n                    query: \"erpnext.controllers.queries.item_query\"\n                };\n            };\n        }\n    },\n    refresh: function(frm) {\n        if (frm.doc.docstatus === 1) {\n        let showOriginalOrder = true;\n        frm.add_custom_button(showOriginalOrder ? 'Original Order' : 'Remaining Order', function () {\n            $.each(frm.doc.items || [], function (i, v) {\n                if (v.qty <= v.received_qty || v.closed) {\n                    const item = $(`[data-idx='${i + 1}']`);\n                    if (showOriginalOrder) {\n                        item.hide();\n                    } else {\n                        item.show();\n                    }\n                }\n            });\n            showOriginalOrder = !showOriginalOrder;\n        });\n        }\n    },\n    before_save(frm) {\n        let supplier = frm.doc.supplier;\n        if (supplier in boxSupplier) {\n            $.each(frm.doc.items || [], function (i, v) {\n                frappe.model.set_value(v.doctype, v.name, \"warehouse\", boxSupplier[supplier].away);\n                frappe.model.set_value(v.doctype, v.name, \"from_warehouse\", boxSupplier[supplier].home);\n                if (v.qty < v.received_qty) {\n                    console.log($([]))\n                    $([]).hide();\n                }\n                frm.refresh_field(\"items\");\n            });\n        }\n    }\n});\n\nfrappe.ui.form.on('Purchase Order Item', {\n    item_code(frm, cdt, cdn) {\n        if (frm.doc.based_on_material_request) {\n            let row = locals[cdt][cdn];\n            frappe.call({\n                method: \"raplbaddi.api.get_mr\",\n                args: {\n                    item_code: row.item_code\n                },\n                callback: (responses) => {\n                    responses.message.forEach(response => {\n                        let new_item = frm.add_child('items');\n                        new_item.item_code = row.item_code;\n                        new_item.uom = 'Nos';\n                        new_item.item_name = row.item_code;\n                        new_item.description = row.item_code;\n                        new_item.material_request_item = response.material_request_item;\n                        new_item.material_request = response.material_request;\n                        new_item.qty = response.remaining_for_order_qty;\n                    });\n                    frm.get_field('items').grid.grid_rows_by_docname[cdn].remove();\n                    frm.refresh_field('items');\n                }\n            });\n        }\n    }\n});\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Order",
  "enabled": 0,
  "modified": "2023-12-18 15:16:03.669747",
  "module": null,
  "name": "SO Total",
  "script": "frappe.ui.form.on('Sales Order', {\n\trefresh(frm) {\n\t    total = {}\n\t\tfor(j of frm.doc.items) {\n            for (let key in j) {\n              if (typeof(j[key]) == 'number'){\n                total.j[key] = 0\n              }\n            }\n\t\t}\n\t\tfrm.doc.items.push(total)\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 0,
  "modified": "2025-04-01 20:52:53.736527",
  "module": null,
  "name": "Material Request Quantity",
  "script": "frappe.ui.form.on('Material Request', {\n\trefresh(frm) { \n\t    let total = 0\n\t    frm.doc.items.forEach((e) =>{\n\t        total += e.qty\n\t        \n\t        console.log(total)\n\t    })\n\t    console.log(total)\n        frm.set_value('custom_total_mr_quantity',total)\n\t}\n})\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Receipt Note",
  "enabled": 1,
  "modified": "2023-12-18 18:11:22.071272",
  "module": null,
  "name": "Total MRN Note",
  "script": "frappe.ui.form.on('Material Receipt Note', {\n\trefresh(frm) {\n\t    let total = 0\n\t    frm.doc.items.forEach((e) =>{\n\t        total += e.received_qty\n\t    })\n\t    console.log(total)\n        frm.set_value('custom_total_received_qty',total)\n\t}\n})\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Work Order",
  "enabled": 1,
  "modified": "2023-12-18 18:25:06.227176",
  "module": null,
  "name": "Work order total",
  "script": "frappe.ui.form.on('Work Order', {\n\trefresh(frm) {\n\t    let total_recieved_qty = 0\n\t    let total_consumed_qty = 0\n\t    let total_returned_qty = 0\n\t    let total_transferred_qty = 0\n\t\tfrm.doc.required_items.forEach((e)=>{\n\t\t    total_recieved_qty += e.required_qty\n\t\t    total_consumed_qty += e.consumed_qty\n            total_returned_qty += e.returned_qty\n            total_transferred_qty += e.transferred_qty\n            \n\t\t})\n\t\tfrm.set_value('custom_total_recieved_wo_qty',total_recieved_qty)\n\t\tfrm.set_value('custom_total_transferred_wo_qty',total_transferred_qty)\n\t\tfrm.set_value('custom_total_consumed_wo_qty',total_consumed_qty)\n\t\tfrm.set_value('custom_total_returned_wo_qty',total_returned_qty)\n\t}\n})",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Production Plan",
  "enabled": 1,
  "modified": "2023-12-18 18:44:54.961106",
  "module": null,
  "name": "Production plan total",
  "script": "frappe.ui.form.on('Production Plan', {\n\trefresh(frm) {\n\t    let total_planned_qty = 0\n\t    let total_produced_qty = 0\n\t    let total_pending_qty = 0\n\t    let total_ordered_qty = 0\n\t\tfrm.doc.po_items.forEach((e)=>{\n\t\t    console.log(e)\n\t\t    total_planned_qty += e.planned_qty\n\t\t    total_produced_qty += e.produced_qty\n            total_pending_qty += e.pending_qty\n            total_ordered_qty += e.ordered_qty\n\t\t})\n\t\tfrm.set_value('custom_po_item_total',total_planned_qty)\n\t\tfrm.set_value('custom_total_po_ordered_qty',total_ordered_qty)\n\t\tfrm.set_value('custom_total_po_produced_qty',total_produced_qty)\n\t\tfrm.set_value('custom_total_po_pending_qty',total_pending_qty)\n\t}\n})",
  "view": "Form"
 }
]